@import: test-case

% Todo
% x call test method
% multiple tests
% aggregate test results

let assert b = if b then () else abort-with-message `Assertion failed` in

let test fn = (| run = fn |) in
let run test-case = test-case#run () in

let-mutable was-run <- false in

let () = assert (not (!was-run)) in

let () = TestCase.test (fun () -> (was-run <- true))
  |> TestCase.run in

let () = assert (!was-run) in

`Following "The xUnit example" of "Test-Driven Development"`
